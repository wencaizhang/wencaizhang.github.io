<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>è´£ä»»é“¾æ¨¡å¼ on Clarity</title><link>/tags/%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F/</link><description>Recent content in è´£ä»»é“¾æ¨¡å¼ on Clarity</description><generator>Hugo -- gohugo.io</generator><copyright>Copyright Â© 2018-2021, wencaizhang and the Hugo Authors; all rights reserved.</copyright><lastBuildDate>Sat, 12 Dec 2020 00:00:00 +0000</lastBuildDate><atom:link href="/tags/%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F/index.xml" rel="self" type="application/rss+xml"/><item><title>è´£ä»»é“¾æ¨¡å¼</title><link>/series/design-patterns/chain-of-responsibility-pattern/</link><pubDate>Sat, 12 Dec 2020 00:00:00 +0000</pubDate><guid>/series/design-patterns/chain-of-responsibility-pattern/</guid><description>
&lt;h2 id="èƒŒæ™¯äº¤ä»£">èƒŒæ™¯äº¤ä»£&lt;/h2>
&lt;p>æœ€è¿‘è´Ÿè´£çš„ä¸€ä¸ªå‰ç«¯é¡¹ç›®éšç€éœ€æ±‚å’ŒåŠŸèƒ½çš„å‡çº§ï¼Œä»£ç è¶Šå†™è¶Šå¤æ‚ï¼Œå°¤å…¶æ˜¯ç™»å½•æ¨¡å—çš„åˆ¤æ–­é€»è¾‘ï¼Œå°±åƒæ˜¯é‚£è€å¤ªå¤ªçš„ç¼ è„šå¸ƒâ€”â€”åˆè‡­åˆé•¿!&lt;/p>
&lt;p>åˆšå¥½è¶ç€ç™»å½•çš„éœ€æ±‚å˜æ›´ï¼Œä½¿ç”¨&lt;strong>è´£ä»»é“¾æ¨¡å¼&lt;/strong>æŠŠç›¸å…³ä»£ç é‡æ„äº†ä¸€ç•ªï¼Œé‡æ„ä¹‹åå†çœ‹ä»£ç ï¼Œå•§å•§ï¼Œä»£ç ä¹‹æ•´æ´ä¸”é€»è¾‘æ¸…æ™°ï¼Œå¿ä¸ä½è¦ç»™è‡ªå·±é€ä¸€æœµå°çº¢èŠ± ğŸŒº â€”â€” ä¼˜ç§€ï¼&lt;/p>
&lt;!--
å…ˆä»‹ç»ä¸€ä¸‹éœ€æ±‚ï¼Œåœ¨ç™»å½•é¡µé¢æäº¤æ•°æ®å¾—åˆ°å“åº”åéœ€è¦è¿›è¡Œå¤šé‡åˆ¤æ–­ï¼Œå¦‚ä¸‹ï¼š
-->
&lt;h2 id="æ’¸èµ·è¢–å­åŠ æ²¹å¹²">æ’¸èµ·è¢–å­åŠ æ²¹å¹²&lt;/h2>
&lt;p>æˆ‘ä»¬çº¦å®šå¥½ï¼Œå°†å•ä¸ªåˆ¤æ–­é€»è¾‘å°è£…æˆä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°æ¥æ”¶ç›¸åŒçš„å‚æ•°ï¼Œè¿”å›å€¼çš„ç»Ÿä¸€ä¸ºä¸€ä¸ª promiseã€‚&lt;/p>
&lt;p>å¦‚æœåˆ¤æ–­é€šè¿‡ï¼Œå¯ä»¥è¿›è¡Œä¸‹ä¸€æ­¥åˆ¤æ–­ï¼Œè¿”å› fulfill çŠ¶æ€çš„ promiseï¼Œå¦‚æœæœªé€šè¿‡éœ€è¦ç»“æŸåç»­åˆ¤æ–­ï¼Œåˆ™è¿”å› rejected çŠ¶æ€çš„ promiseã€‚&lt;/p>
&lt;p>è¿™é‡Œçš„ä»£ç å‡ä¸ºç¤ºæ„ä»£ç ï¼Œå…¶ä¸­çš„åˆ¤æ–­é€»è¾‘éƒ½è¿›è¡Œäº†ç®€åŒ–ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="ln"> 1&lt;/span>&lt;span class="kd">function&lt;/span> &lt;span class="nx">handlePwdExpired&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">resp&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="ln"> 2&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">resp&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">expired&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="ln"> 3&lt;/span> &lt;span class="c1">// å¯†ç è¿‡æœŸå¤„ç†é€»è¾‘
&lt;/span>&lt;span class="ln"> 4&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;å¯†ç è¿‡æœŸï¼Œè¯·ä¿®æ”¹å¯†ç åé‡æ–°ç™»å½•&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="ln"> 5&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="nb">Promise&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">rejected&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;å¯†ç è¿‡æœŸ&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="ln"> 6&lt;/span> &lt;span class="p">}&lt;/span>
&lt;span class="ln"> 7&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="nb">Promise&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">resolve&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">resp&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="ln"> 8&lt;/span>&lt;span class="p">}&lt;/span>
&lt;span class="ln"> 9&lt;/span>
&lt;span class="ln">10&lt;/span>&lt;span class="kd">function&lt;/span> &lt;span class="nx">handleAuthStatus&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">resp&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="ln">11&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">resp&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">status&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="ln">12&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="nb">Promise&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">resolve&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">resp&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="ln">13&lt;/span> &lt;span class="p">}&lt;/span>
&lt;span class="ln">14&lt;/span> &lt;span class="c1">// å®åè®¤è¯æœªé€šè¿‡å¤„ç†é€»è¾‘
&lt;/span>&lt;span class="ln">15&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;å®åè®¤è¯æœªé€šè¿‡ï¼Œè¯·è€å¿ƒç­‰å¾…&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="ln">16&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="nb">Promise&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">rejected&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;å®åè®¤è¯æœªé€šè¿‡&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="ln">17&lt;/span>&lt;span class="p">}&lt;/span>
&lt;span class="ln">18&lt;/span>
&lt;span class="ln">19&lt;/span>&lt;span class="kd">function&lt;/span> &lt;span class="nx">handleDefault&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">resp&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="ln">20&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;é€»è¾‘åˆ¤æ–­ç»“æŸï¼Œè¿›å…¥ç³»ç»Ÿ&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="ln">21&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>å®šä¹‰å¥½ä¸Šé¢å¤„ç†ç­–ç•¥ä¹‹åï¼Œæˆ‘ä»¬æ¥è°ƒç”¨&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="ln"> 1&lt;/span>&lt;span class="c1">// å‡å®šæˆ‘ä»¬å·²ç»æ‹¿åˆ°äº†å“åº”
&lt;/span>&lt;span class="ln"> 2&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="kr">const&lt;/span> &lt;span class="nx">resp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="ln"> 3&lt;/span> &lt;span class="nx">status&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="ln"> 4&lt;/span> &lt;span class="nx">expired&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="ln"> 5&lt;/span>&lt;span class="p">}&lt;/span>
&lt;span class="ln"> 6&lt;/span>
&lt;span class="ln"> 7&lt;/span>&lt;span class="nb">Promise&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">resolve&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">resp&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="ln"> 8&lt;/span> &lt;span class="p">.&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">resp&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="ln"> 9&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="nx">handlePwdExpired&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">resp&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="ln">10&lt;/span> &lt;span class="p">})&lt;/span>
&lt;span class="ln">11&lt;/span> &lt;span class="p">.&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">resp&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="ln">12&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="nx">handleAuthStatus&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">resp&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="ln">13&lt;/span> &lt;span class="p">})&lt;/span>
&lt;span class="ln">14&lt;/span> &lt;span class="p">.&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">resp&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="ln">15&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="nx">handleDefault&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">resp&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="ln">16&lt;/span> &lt;span class="p">})&lt;/span>
&lt;span class="ln">17&lt;/span> &lt;span class="p">.&lt;/span>&lt;span class="k">catch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="ln">18&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="ln">19&lt;/span> &lt;span class="p">})&lt;/span>
&lt;/code>&lt;/pre>&lt;/div></description></item></channel></rss>